{
    "openapi": "3.0.0",
    "info": {
        "title": "Subway Guatemala Customer API",
        "description": "API REST para la aplicación móvil de clientes de Subway Guatemala. Incluye autenticación multi-canal (email/password y Google OAuth), gestión de perfil, dispositivos FCM para notificaciones push y futuras funcionalidades de pedidos y lealtad.",
        "contact": {
            "email": "dev@subwayguatemala.com"
        },
        "version": "1.0.2"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Local Development Server"
        },
        {
            "url": "https://admin.subwaycardgt.com/",
            "description": "Application Server"
        }
    ],
    "paths": {
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Registrar nuevo cliente",
                "description": "Crea una nueva cuenta de cliente con email y contraseña.\n     *\n     * **Nota:** Si el email ya está registrado (activo), retorna error 422.\n     * Si deseas registrar un email que tenía cuenta eliminada, usa POST /api/v1/auth/reactivate o espera 30 días.",
                "operationId": "7ca6fc7989202054d29707fef91a2d4a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "first_name",
                                    "last_name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "phone",
                                    "birth_date",
                                    "gender",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "first_name": {
                                        "description": "Nombre del cliente",
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "description": "Apellido del cliente",
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "email": {
                                        "description": "Correo electrónico válido",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Mínimo 6 caracteres, 1 letra, 1 número",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Pass123"
                                    },
                                    "password_confirmation": {
                                        "description": "Debe coincidir con password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Pass123"
                                    },
                                    "phone": {
                                        "description": "Número de teléfono",
                                        "type": "string",
                                        "example": "+50212345678"
                                    },
                                    "birth_date": {
                                        "description": "Fecha de nacimiento",
                                        "type": "string",
                                        "format": "date",
                                        "example": "1990-05-15"
                                    },
                                    "gender": {
                                        "description": "Género",
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female",
                                            "other"
                                        ],
                                        "example": "male"
                                    },
                                    "device_identifier": {
                                        "description": "UUID único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Registro exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Registro exitoso. Por favor verifica tu email."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este correo ya está registrado."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Este correo ya está registrado."
                                                    }
                                                },
                                                "first_name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El nombre es requerido."
                                                    }
                                                },
                                                "last_name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El apellido es requerido."
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las contraseñas no coinciden."
                                                    }
                                                },
                                                "phone": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El teléfono debe tener exactamente 8 dígitos."
                                                    }
                                                },
                                                "birth_date": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La fecha de nacimiento es requerida."
                                                    }
                                                },
                                                "gender": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El género es requerido."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Iniciar sesión con email y contraseña",
                "description": "Autentica al cliente y devuelve token Sanctum. Limitado a 5 intentos por minuto.\n     *\n     * **Si la cuenta fue eliminada:**\n     * - Retorna 409 con `code: account_deleted_recoverable`\n     * - Incluye días restantes para reactivar y puntos acumulados\n     * - El cliente debe usar POST /api/v1/auth/reactivate para recuperar la cuenta",
                "operationId": "9d0bb5c770cbec19b0b9566606ef4adb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_identifier": {
                                        "description": "UUID único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Inicio de sesión exitoso."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Cuenta eliminada - puede reactivarse",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Encontramos una cuenta eliminada con este correo."
                                        },
                                        "code": {
                                            "type": "string",
                                            "example": "account_deleted_recoverable"
                                        },
                                        "data": {
                                            "properties": {
                                                "deleted_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-15T10:30:00Z"
                                                },
                                                "days_until_permanent_deletion": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "points": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "can_reactivate": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "oauth_provider": {
                                                    "description": "Tipo de cuenta: 'local' (email/password), 'google', o 'apple'. Si es 'local', el reactivate requiere password.",
                                                    "type": "string",
                                                    "example": "local"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Credenciales inválidas o cuenta OAuth",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Las credenciales proporcionadas son incorrectas."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las credenciales proporcionadas son incorrectas."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiados intentos de acceso"
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout from current device",
                "description": "Revokes the current access token. Other devices remain logged in.",
                "operationId": "3a27a9e02ceb521eb3f98c8d2394aef9",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Sesión cerrada exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/logout-all": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout from all devices",
                "description": "Revokes all access tokens. Customer will be logged out from all devices.",
                "operationId": "afe5fcc3199730bf8caf978b67c6a0c0",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Se cerraron todas las sesiones exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "description": "Generates new access token and revokes the old one. Token rotation for security.",
                "operationId": "437b695fba1c5eecef1841f958322adc",
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token renovado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "token": {
                                                    "type": "string",
                                                    "example": "2|xyz456abc..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/forgot-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Solicitar restablecimiento de contraseña",
                "description": "Envía un enlace de restablecimiento de contraseña al correo del cliente. Solo funciona para cuentas locales (no OAuth).\n     *\n     * **Errores posibles:**\n     * - email_not_found: No existe una cuenta activa con este correo\n     * - oauth_no_password: La cuenta usa OAuth, no tiene contraseña",
                "operationId": "4011ca27431b5cd53a225688e531de47",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Enlace de restablecimiento enviado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Enlace de restablecimiento de contraseña enviado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No existe una cuenta con este correo electrónico."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No existe una cuenta con este correo electrónico."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/reset-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Restablecer contraseña con token",
                "description": "Restablece la contraseña usando el token recibido por email. Revoca todos los tokens existentes por seguridad.\n     *\n     * **Errores posibles:**\n     * - passwords.token: Token inválido o expirado\n     * - passwords.user: No existe una cuenta con este email",
                "operationId": "aba7a33c4064b5b1a2f3a8a70c20094b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "token"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Mínimo 6 caracteres",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "token": {
                                        "description": "Token recibido en el email",
                                        "type": "string",
                                        "example": "abc123resettoken456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña restablecida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Contraseña restablecida exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Token inválido o error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este token de restablecimiento de contraseña es inválido."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Este token de restablecimiento de contraseña es inválido."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/email/verify/{id}/{hash}": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify email address",
                "description": "Verifies customer email using signed URL from verification email.",
                "operationId": "1cd7d201c16988ffdc55af25262f9ac8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Customer ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "hash",
                        "in": "path",
                        "description": "Email hash for verification",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Email verified successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Email verificado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid verification link"
                    },
                    "429": {
                        "description": "Too many requests"
                    }
                }
            }
        },
        "/api/v1/auth/email/resend": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Resend verification email",
                "description": "Sends a new verification email to the customer.",
                "operationId": "f07474133b03f2e2f82012253317a15f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification email sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Enlace de verificación reenviado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Email not found or already verified"
                    },
                    "429": {
                        "description": "Too many requests"
                    }
                }
            }
        },
        "/api/v1/auth/reactivate": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Reactivar cuenta eliminada",
                "description": "Reactiva una cuenta de cliente que fue soft-deleted. Solo funciona si no han pasado más de 30 días desde la eliminación.\n     *\n     * **Flujo:**\n     * 1. Busca cuenta eliminada con el email proporcionado\n     * 2. Verifica que no hayan pasado más de 30 días desde eliminación\n     * 3. Para cuentas locales, verifica la contraseña\n     * 4. Restaura la cuenta y genera nuevo token\n     * 5. Retorna datos del usuario incluyendo puntos acumulados\n     *\n     * **Errores posibles:**\n     * - account_not_found_deleted: No existe cuenta eliminada con este email\n     * - reactivation_period_expired: Han pasado más de 30 días desde eliminación\n     * - incorrect_password: Contraseña incorrecta (solo cuentas locales)",
                "operationId": "e08ef1a6deb11a0fdce4b7e2ddd9ee7e",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email de la cuenta eliminada",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña (requerida solo para cuentas locales, no OAuth)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_identifier": {
                                        "description": "Identificador único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cuenta reactivada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cuenta reactivada exitosamente. Bienvenido de nuevo."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                },
                                                "points": {
                                                    "description": "Puntos acumulados que se conservaron",
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "deleted_at": {
                                                    "description": "Fecha original de eliminación",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-20T10:30:00.000000Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró una cuenta eliminada con este correo electrónico."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No se encontró una cuenta eliminada con este correo electrónico."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/oauth/google/redirect": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Redirect to Google OAuth (Web & Mobile)",
                "description": "Initiates Google OAuth flow for any platform. Uses OAuth 2.0 state parameter to maintain context across the redirect flow.",
                "operationId": "d45644767bd0769d1084909175bff619",
                "parameters": [
                    {
                        "name": "action",
                        "in": "query",
                        "description": "Action type: 'login' for existing users or 'register' for new users",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "login",
                                "register"
                            ],
                            "example": "login"
                        }
                    },
                    {
                        "name": "platform",
                        "in": "query",
                        "description": "Client platform: 'web' for web applications (returns JSON) or 'mobile' for mobile apps (redirects via deep link)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "web",
                                "mobile"
                            ],
                            "example": "web"
                        }
                    },
                    {
                        "name": "device_id",
                        "in": "query",
                        "description": "Device identifier UUID for tracking. **REQUIRED when platform=mobile**, optional for web.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect to Google OAuth consent screen"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The action field is required."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/google/callback": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Callback de OAuth de Google (Web y Móvil)",
                "description": "Maneja el callback de OAuth después de la autorización de Google. Este endpoint es llamado automáticamente por Google. Decodifica el parámetro state de OAuth 2.0 para determinar plataforma y acción, luego autentica o registra al usuario.\n     *\n     * **Respuestas de éxito:**\n     * - Web: redirige a /oauth/success con token, customer_id, is_new_customer=1|0, message\n     * - Móvil: redirige a subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **Respuestas de error:**\n     * - Web: redirige a /oauth/success con error=xxx&message=xxx\n     * - Móvil: redirige a subwayapp://oauth/callback?error=xxx&message=xxx\n     *\n     * **Códigos de error posibles:**\n     * - user_already_exists: La cuenta ya existe (en flujo de registro)\n     * - email_not_registered: El email no está registrado (en flujo de login)\n     * - authentication_failed: Error general de autenticación\n     *\n     * **Parámetro is_new_customer:**\n     * - 1: Usuario recién registrado (debe completar perfil)\n     * - 0: Usuario existente (login normal)",
                "operationId": "281ab9caddb2b86e3614c9e34567db4f",
                "parameters": [
                    {
                        "name": "code",
                        "in": "query",
                        "description": "Código de autorización de Google OAuth",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4/0AY0e-g7..."
                        }
                    },
                    {
                        "name": "state",
                        "in": "query",
                        "description": "Parámetro state de OAuth 2.0 con información codificada de plataforma, acción y device_id",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "eyJwbGF0Zm9ybSI6IndlYiIsImFjdGlvbiI6ImxvZ2luIn0="
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Respuesta de redirección según plataforma y resultado.\n     *\n     * **ÉXITO WEB:** /oauth/success?token=xxx&customer_id=xxx&is_new_customer=1|0&message=xxx\n     *\n     * **ERROR WEB:** /oauth/success?error=user_already_exists&message=Ya existe una cuenta...\n     *\n     * **ÉXITO MÓVIL:** subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **ERROR MÓVIL:** subwayapp://oauth/callback?error=user_already_exists&message=Ya existe una cuenta...",
                        "headers": {
                            "Location": {
                                "description": "URL de redirección según plataforma y resultado",
                                "schema": {
                                    "type": "string",
                                    "example": "/oauth/success?token=xxx&customer_id=123&is_new_customer=1"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/apple/redirect": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Redirect to Apple OAuth (Web & Mobile)",
                "description": "Initiates Apple OAuth flow for any platform. Uses OAuth 2.0 state parameter to maintain context.",
                "operationId": "eb85e9832719d0e001c347b4497fbd03",
                "parameters": [
                    {
                        "name": "action",
                        "in": "query",
                        "description": "Action type: 'login' for existing users or 'register' for new users",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "login",
                                "register"
                            ],
                            "example": "login"
                        }
                    },
                    {
                        "name": "platform",
                        "in": "query",
                        "description": "Client platform: 'web' for web applications (returns JSON) or 'mobile' for mobile apps (redirects via deep link)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "web",
                                "mobile"
                            ],
                            "example": "web"
                        }
                    },
                    {
                        "name": "device_id",
                        "in": "query",
                        "description": "Device identifier UUID for tracking. **REQUIRED when platform=mobile**, optional for web.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect to Apple OAuth consent screen"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The action field is required."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/apple/callback": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Callback de OAuth de Apple (Web y Móvil)",
                "description": "Maneja el callback de OAuth después de la autorización de Apple. Decodifica el parámetro state de OAuth 2.0 para determinar plataforma y acción. NOTA: Apple solo envía nombre/email en la PRIMERA autenticación, los logins posteriores solo retornan el user ID.\n     *\n     * **Respuestas de éxito:**\n     * - Web: redirige a /oauth/success con token, customer_id, is_new_customer=1|0, message\n     * - Móvil: redirige a subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **Respuestas de error:**\n     * - Web: redirige a /oauth/success con error=xxx&message=xxx\n     * - Móvil: redirige a subwayapp://oauth/callback?error=xxx&message=xxx\n     *\n     * **Códigos de error posibles:**\n     * - user_already_exists: La cuenta ya existe (en flujo de registro)\n     * - email_not_registered: El email no está registrado (en flujo de login)\n     * - authentication_failed: Error general de autenticación\n     *\n     * **Parámetro is_new_customer:**\n     * - 1: Usuario recién registrado (debe completar perfil)\n     * - 0: Usuario existente (login normal)",
                "operationId": "f4d2234c8403161c607fa0d3b8a3a07a",
                "parameters": [
                    {
                        "name": "code",
                        "in": "query",
                        "description": "Código de autorización de Apple OAuth",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "state",
                        "in": "query",
                        "description": "Parámetro state de OAuth 2.0 con información codificada de plataforma, acción y device_id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Respuesta de redirección según plataforma y resultado.\n     *\n     * **ÉXITO WEB:** /oauth/success?token=xxx&customer_id=xxx&is_new_customer=1|0&message=xxx\n     *\n     * **ERROR WEB:** /oauth/success?error=user_already_exists&message=Ya existe una cuenta...\n     *\n     * **ÉXITO MÓVIL:** subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **ERROR MÓVIL:** subwayapp://oauth/callback?error=user_already_exists&message=Ya existe una cuenta..."
                    }
                }
            }
        },
        "/api/v1/devices": {
            "get": {
                "tags": [
                    "Devices"
                ],
                "summary": "List customer devices",
                "description": "Returns all active devices for authenticated customer. Current device is flagged with is_current_device=true.",
                "operationId": "afcbc146bf93b130969374c0c29f42f6",
                "responses": {
                    "200": {
                        "description": "Devices retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/CustomerDevice"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/devices/register": {
            "post": {
                "tags": [
                    "Devices"
                ],
                "summary": "Register or update device",
                "description": "Enriches existing device (auto-created during auth) with FCM token and custom device name. The mobile app MUST send a personalized device name (e.g., 'iPhone 14 Pro de Juan', 'Samsung Galaxy S23 de María') to replace the generic 'Device' name created during authentication. This allows users to identify their devices in the device list.",
                "operationId": "0743195c75a8fccfdf9875291bd6d8c0",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "fcm_token",
                                    "device_identifier",
                                    "device_name"
                                ],
                                "properties": {
                                    "fcm_token": {
                                        "description": "Firebase Cloud Messaging token for push notifications",
                                        "type": "string",
                                        "example": "fKw8h4Xj..."
                                    },
                                    "device_identifier": {
                                        "description": "REQUIRED: Unique device UUID (must match identifier from auth)",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    },
                                    "device_name": {
                                        "description": "REQUIRED: Personalized device name set by the app (e.g., 'iPhone 14 Pro de Juan', 'Samsung Galaxy S23 de María'). This name will be displayed to the user when managing their devices.",
                                        "type": "string",
                                        "example": "iPhone 14 Pro de Juan"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Device registered or updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dispositivo registrado exitosamente."
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/CustomerDevice"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/devices/{device}": {
            "delete": {
                "tags": [
                    "Devices"
                ],
                "summary": "Deactivate device",
                "description": "Marks device as inactive (soft deactivate). Device will no longer receive push notifications.",
                "operationId": "a9545ae592649836835794a3421d3551",
                "parameters": [
                    {
                        "name": "device",
                        "in": "path",
                        "description": "Device ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Device deactivated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dispositivo desactivado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - device belongs to another customer"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile": {
            "get": {
                "tags": [
                    "Profile"
                ],
                "summary": "Get customer profile",
                "description": "Returns authenticated customer profile with addresses, NITs, and active devices.",
                "operationId": "dffac35700b3186de8d19cc212fe0285",
                "responses": {
                    "200": {
                        "description": "Profile retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Profile"
                ],
                "summary": "Update customer profile",
                "description": "Updates customer profile information. If email is changed, marks email as unverified.",
                "operationId": "d682da2fd566e34f597e169ac582ad3f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Pérez Actualizado"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "nuevo@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+50212345678",
                                        "nullable": true
                                    },
                                    "birth_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "1990-05-15",
                                        "nullable": true
                                    },
                                    "gender": {
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female",
                                            "other"
                                        ],
                                        "example": "male",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Perfil actualizado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Profile"
                ],
                "summary": "Eliminar cuenta de cliente",
                "description": "Soft delete de la cuenta del cliente. Revoca todos los tokens.\n     *\n     * **Para cuentas locales (email/contraseña):**\n     * - Requiere: password (contraseña actual para confirmar)\n     *\n     * **Para cuentas OAuth (Google/Apple) sin contraseña:**\n     * - NO requiere password (el body puede estar vacío o enviar `{}`)\n     *\n     * **Período de gracia:**\n     * - La cuenta se puede recuperar dentro de 30 días usando POST /api/v1/auth/reactivate\n     * - Después de 30 días, la cuenta se elimina permanentemente",
                "operationId": "dd388e266427403d3d4573c1104c784a",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "password": {
                                        "description": "Contraseña actual. SOLO requerido para cuentas locales (oauth_provider='local'). NO enviar si es cuenta OAuth.",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cuenta eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cuenta eliminada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "can_reactivate_until": {
                                                    "description": "Fecha límite para reactivar la cuenta",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-27T10:30:00Z"
                                                },
                                                "days_to_reactivate": {
                                                    "description": "Días restantes para reactivar",
                                                    "type": "integer",
                                                    "example": 30
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Contraseña incorrecta (solo cuentas locales)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La contraseña es incorrecta."
                                        },
                                        "errors": {
                                            "properties": {
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña es incorrecta."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile/avatar": {
            "post": {
                "tags": [
                    "Profile"
                ],
                "summary": "Update customer avatar",
                "description": "Updates customer avatar URL. Can be a URL to uploaded image or OAuth provider avatar.",
                "operationId": "b67e208bcaefaa8d266a90398752d0c6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "avatar"
                                ],
                                "properties": {
                                    "avatar": {
                                        "description": "Avatar URL",
                                        "type": "string",
                                        "example": "https://example.com/avatar.jpg"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Avatar updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Avatar actualizado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "avatar": {
                                                    "type": "string",
                                                    "example": "https://example.com/avatar.jpg"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Profile"
                ],
                "summary": "Delete customer avatar",
                "description": "Removes customer avatar. Sets avatar to null.",
                "operationId": "c62431c4a1d50a4ac550be7c4bf25477",
                "responses": {
                    "200": {
                        "description": "Avatar deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Avatar eliminado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile/password": {
            "put": {
                "tags": [
                    "Profile"
                ],
                "summary": "Actualizar o crear contraseña",
                "description": "Cambia o crea la contraseña del cliente. Revoca todos los tokens excepto el actual por seguridad.\n     *\n     * **Para cuentas locales (email/contraseña):**\n     * - Requiere: current_password, password, password_confirmation\n     * - La nueva contraseña debe ser diferente a la actual\n     *\n     * **Para cuentas OAuth (Google/Apple) sin contraseña:**\n     * - Requiere: password, password_confirmation\n     * - NO requiere current_password (están creando su primera contraseña)\n     * - Después de crear contraseña, pueden usar ambos métodos: OAuth y contraseña\n     *\n     * **Comportamiento después de crear contraseña (OAuth):**\n     * - El usuario mantiene su google_id/apple_id vinculado\n     * - oauth_provider cambia a 'local'\n     * - Puede iniciar sesión con Google/Apple O con email+contraseña",
                "operationId": "141e4afbe7b6c73bcd252f096680adb5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "current_password": {
                                        "description": "Contraseña actual. SOLO requerido para cuentas locales (oauth_provider='local'). NO enviar si es cuenta OAuth.",
                                        "type": "string",
                                        "format": "password",
                                        "example": "OldPass123!"
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (mínimo 6 caracteres, al menos 1 letra y 1 número)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Debe coincidir con password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña actualizada/creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Contraseña creada exitosamente. Ahora puedes iniciar sesión con tu correo y contraseña."
                                        },
                                        "data": {
                                            "properties": {
                                                "password_created": {
                                                    "description": "true si es primera contraseña (usuario OAuth), false si fue cambio de contraseña existente",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "can_use_password_login": {
                                                    "description": "Siempre true después de esta operación",
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La contraseña actual es incorrecta."
                                        },
                                        "errors": {
                                            "properties": {
                                                "current_password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña actual es incorrecta."
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las contraseñas no coinciden."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Customer": {
                "title": "Customer",
                "description": "Customer model with profile information and loyalty data",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "first_name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "full_name": {
                        "description": "Computed full name",
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan@example.com"
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z",
                        "nullable": true
                    },
                    "avatar": {
                        "type": "string",
                        "example": "https://example.com/avatar.jpg",
                        "nullable": true
                    },
                    "oauth_provider": {
                        "type": "string",
                        "enum": [
                            "local",
                            "google"
                        ],
                        "example": "local"
                    },
                    "subway_card": {
                        "description": "Unique loyalty card number (10-12 digits)",
                        "type": "string",
                        "example": "802056895224"
                    },
                    "birth_date": {
                        "type": "string",
                        "format": "date",
                        "example": "1990-05-15",
                        "nullable": true
                    },
                    "gender": {
                        "type": "string",
                        "enum": [
                            "male",
                            "female",
                            "other"
                        ],
                        "example": "male",
                        "nullable": true
                    },
                    "phone": {
                        "description": "8-digit phone number (Guatemala)",
                        "type": "string",
                        "example": "12345678",
                        "nullable": true
                    },
                    "last_login_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z",
                        "nullable": true
                    },
                    "last_activity_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T16:00:00Z",
                        "nullable": true
                    },
                    "last_purchase_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-18T12:30:00Z",
                        "nullable": true
                    },
                    "points": {
                        "description": "Available loyalty points",
                        "type": "integer",
                        "example": 150
                    },
                    "points_updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-18T12:30:00Z",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "suspended"
                        ],
                        "example": "active"
                    },
                    "is_online": {
                        "description": "True if customer is currently active",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-10T08:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z"
                    }
                },
                "type": "object"
            },
            "CustomerDevice": {
                "title": "CustomerDevice",
                "description": "Customer device registered for push notifications",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "customer_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "sanctum_token_id": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "fcm_token": {
                        "type": "string",
                        "example": "fKw8h4Xj...",
                        "nullable": true
                    },
                    "device_identifier": {
                        "type": "string",
                        "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "device_name": {
                        "type": "string",
                        "example": "iPhone 14 Pro de Juan",
                        "nullable": true
                    },
                    "last_used_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z",
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "login_count": {
                        "type": "integer",
                        "example": 15
                    },
                    "is_current_device": {
                        "description": "True if this device is associated with current token",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-10T08:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Laravel Sanctum Bearer Token. Obtain from /api/v1/auth/login, /api/v1/auth/register, or OAuth endpoints.",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Endpoints para registro, inicio de sesión, recuperación de contraseña y verificación de email"
        },
        {
            "name": "OAuth",
            "description": "Endpoints para autenticación con Google OAuth"
        },
        {
            "name": "Profile",
            "description": "Gestión del perfil del cliente"
        },
        {
            "name": "Devices",
            "description": "Gestión de dispositivos y tokens FCM para notificaciones push"
        }
    ]
}