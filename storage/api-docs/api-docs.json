{
    "openapi": "3.0.0",
    "info": {
        "title": "Subway Guatemala Customer API",
        "description": "API REST para la aplicación móvil de clientes de Subway Guatemala. Incluye autenticación multi-canal (email/password y Google OAuth), gestión de perfil, direcciones con validación de geofencing, NITs para facturación, sistema de favoritos, sistema de puntos de lealtad, dispositivos FCM para notificaciones push, sistema de pedidos y más.",
        "contact": {
            "email": "dev@subwayguatemala.com"
        },
        "version": "1.0.3"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Local Development Server"
        },
        {
            "url": "http://localhost",
            "description": "Application Server"
        }
    ],
    "paths": {
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Registrar nuevo cliente",
                "description": "Crea una nueva cuenta de cliente con email y contraseña.\n     *\n     * **Nota:** Si el email ya está registrado (activo), retorna error 422.\n     * Si deseas registrar un email que tenía cuenta eliminada, usa POST /api/v1/auth/reactivate o espera 30 días.",
                "operationId": "7ca6fc7989202054d29707fef91a2d4a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "first_name",
                                    "last_name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "phone",
                                    "birth_date",
                                    "gender",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "first_name": {
                                        "description": "Nombre del cliente",
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "description": "Apellido del cliente",
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "email": {
                                        "description": "Correo electrónico válido",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Mínimo 6 caracteres, 1 letra, 1 número",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Pass123"
                                    },
                                    "password_confirmation": {
                                        "description": "Debe coincidir con password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Pass123"
                                    },
                                    "phone": {
                                        "description": "Número de teléfono",
                                        "type": "string",
                                        "example": "+50212345678"
                                    },
                                    "birth_date": {
                                        "description": "Fecha de nacimiento",
                                        "type": "string",
                                        "format": "date",
                                        "example": "1990-05-15"
                                    },
                                    "gender": {
                                        "description": "Género",
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female",
                                            "other"
                                        ],
                                        "example": "male"
                                    },
                                    "device_identifier": {
                                        "description": "UUID único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Registro exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Registro exitoso. Por favor verifica tu email."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este correo ya está registrado."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Este correo ya está registrado."
                                                    }
                                                },
                                                "first_name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El nombre es requerido."
                                                    }
                                                },
                                                "last_name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El apellido es requerido."
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las contraseñas no coinciden."
                                                    }
                                                },
                                                "phone": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El teléfono debe tener exactamente 8 dígitos."
                                                    }
                                                },
                                                "birth_date": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La fecha de nacimiento es requerida."
                                                    }
                                                },
                                                "gender": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El género es requerido."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Iniciar sesión con email y contraseña",
                "description": "Autentica al cliente y devuelve token Sanctum. Limitado a 5 intentos por minuto.\n     *\n     * **Si la cuenta usa OAuth (Google/Apple):**\n     * - Retorna 409 con `code: oauth_account_required`\n     * - El cliente debe redirigir al usuario al flujo OAuth correspondiente\n     *\n     * **Si la cuenta fue eliminada:**\n     * - Retorna 409 con `code: account_deleted_recoverable`\n     * - Incluye días restantes para reactivar y puntos acumulados\n     * - El cliente debe usar POST /api/v1/auth/reactivate para recuperar la cuenta",
                "operationId": "9d0bb5c770cbec19b0b9566606ef4adb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_identifier": {
                                        "description": "UUID único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Inicio de sesión exitoso."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto - Cuenta OAuth o eliminada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Esta cuenta usa autenticación con google. Por favor inicia sesión con google."
                                                },
                                                "code": {
                                                    "type": "string",
                                                    "example": "oauth_account_required"
                                                },
                                                "data": {
                                                    "properties": {
                                                        "oauth_provider": {
                                                            "description": "Proveedor OAuth que debe usar",
                                                            "type": "string",
                                                            "enum": [
                                                                "google",
                                                                "apple"
                                                            ],
                                                            "example": "google"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "juan@example.com"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Encontramos una cuenta eliminada con este correo."
                                                },
                                                "code": {
                                                    "type": "string",
                                                    "example": "account_deleted_recoverable"
                                                },
                                                "data": {
                                                    "properties": {
                                                        "deleted_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-15T10:30:00Z"
                                                        },
                                                        "days_until_permanent_deletion": {
                                                            "type": "integer",
                                                            "example": 15
                                                        },
                                                        "points": {
                                                            "type": "integer",
                                                            "example": 150
                                                        },
                                                        "can_reactivate": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "oauth_provider": {
                                                            "type": "string",
                                                            "example": "local"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Credenciales inválidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Las credenciales proporcionadas son incorrectas."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las credenciales proporcionadas son incorrectas."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiados intentos de acceso"
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout from current device",
                "description": "Revokes the current access token. Other devices remain logged in.",
                "operationId": "3a27a9e02ceb521eb3f98c8d2394aef9",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Sesión cerrada exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/logout-all": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout from all devices",
                "description": "Revokes all access tokens. Customer will be logged out from all devices.",
                "operationId": "afe5fcc3199730bf8caf978b67c6a0c0",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Se cerraron todas las sesiones exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "description": "Generates new access token and revokes the old one. Token rotation for security.",
                "operationId": "437b695fba1c5eecef1841f958322adc",
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token renovado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "token": {
                                                    "type": "string",
                                                    "example": "2|xyz456abc..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/forgot-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Solicitar restablecimiento de contraseña",
                "description": "Envía un enlace de restablecimiento de contraseña al correo del cliente. Solo funciona para cuentas locales (no OAuth).\n     *\n     * **Errores posibles:**\n     * - email_not_found: No existe una cuenta activa con este correo\n     * - oauth_no_password: La cuenta usa OAuth, no tiene contraseña",
                "operationId": "4011ca27431b5cd53a225688e531de47",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Enlace de restablecimiento enviado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Enlace de restablecimiento de contraseña enviado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No existe una cuenta con este correo electrónico."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No existe una cuenta con este correo electrónico."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/reset-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Restablecer contraseña con token",
                "description": "Restablece la contraseña usando el token recibido por email. Revoca todos los tokens existentes por seguridad.\n     *\n     * **Errores posibles:**\n     * - passwords.token: Token inválido o expirado\n     * - passwords.user: No existe una cuenta con este email",
                "operationId": "aba7a33c4064b5b1a2f3a8a70c20094b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "token"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Mínimo 6 caracteres",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "token": {
                                        "description": "Token recibido en el email",
                                        "type": "string",
                                        "example": "abc123resettoken456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña restablecida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Contraseña restablecida exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Token inválido o error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este token de restablecimiento de contraseña es inválido."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Este token de restablecimiento de contraseña es inválido."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/email/verify/{id}/{hash}": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify email address",
                "description": "Verifies customer email using signed URL from verification email.",
                "operationId": "1cd7d201c16988ffdc55af25262f9ac8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Customer ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "hash",
                        "in": "path",
                        "description": "Email hash for verification",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Email verified successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Email verificado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid verification link"
                    },
                    "429": {
                        "description": "Too many requests"
                    }
                }
            }
        },
        "/api/v1/auth/email/resend": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Resend verification email",
                "description": "Sends a new verification email to the customer.",
                "operationId": "f07474133b03f2e2f82012253317a15f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification email sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Enlace de verificación reenviado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Email not found or already verified"
                    },
                    "429": {
                        "description": "Too many requests"
                    }
                }
            }
        },
        "/api/v1/auth/reactivate": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Reactivar cuenta eliminada",
                "description": "Reactiva una cuenta de cliente que fue soft-deleted. Solo funciona si no han pasado más de 30 días desde la eliminación.\n     *\n     * **Flujo:**\n     * 1. Busca cuenta eliminada con el email proporcionado\n     * 2. Verifica que no hayan pasado más de 30 días desde eliminación\n     * 3. Para cuentas locales, verifica la contraseña\n     * 4. Restaura la cuenta y genera nuevo token\n     * 5. Retorna datos del usuario incluyendo puntos acumulados\n     *\n     * **Errores posibles:**\n     * - account_not_found_deleted: No existe cuenta eliminada con este email\n     * - reactivation_period_expired: Han pasado más de 30 días desde eliminación\n     * - incorrect_password: Contraseña incorrecta (solo cuentas locales)",
                "operationId": "e08ef1a6deb11a0fdce4b7e2ddd9ee7e",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "device_identifier"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email de la cuenta eliminada",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña (requerida solo para cuentas locales, no OAuth)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_identifier": {
                                        "description": "Identificador único del dispositivo",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cuenta reactivada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cuenta reactivada exitosamente. Bienvenido de nuevo."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                },
                                                "token": {
                                                    "type": "string",
                                                    "example": "1|abc123xyz..."
                                                },
                                                "points": {
                                                    "description": "Puntos acumulados que se conservaron",
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "deleted_at": {
                                                    "description": "Fecha original de eliminación",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-20T10:30:00.000000Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró una cuenta eliminada con este correo electrónico."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No se encontró una cuenta eliminada con este correo electrónico."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes"
                    }
                }
            }
        },
        "/api/v1/auth/oauth/google/redirect": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Redirect to Google OAuth (Web & Mobile)",
                "description": "Initiates Google OAuth flow for any platform. Uses OAuth 2.0 state parameter to maintain context across the redirect flow.",
                "operationId": "d45644767bd0769d1084909175bff619",
                "parameters": [
                    {
                        "name": "action",
                        "in": "query",
                        "description": "Action type: 'login' for existing users or 'register' for new users",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "login",
                                "register"
                            ],
                            "example": "login"
                        }
                    },
                    {
                        "name": "platform",
                        "in": "query",
                        "description": "Client platform: 'web' for web applications (returns JSON) or 'mobile' for mobile apps (redirects via deep link)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "web",
                                "mobile"
                            ],
                            "example": "web"
                        }
                    },
                    {
                        "name": "device_id",
                        "in": "query",
                        "description": "Device identifier UUID for tracking. **REQUIRED when platform=mobile**, optional for web.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect to Google OAuth consent screen"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The action field is required."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/google/callback": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Callback de OAuth de Google (Web y Móvil)",
                "description": "Maneja el callback de OAuth después de la autorización de Google. Este endpoint es llamado automáticamente por Google. Decodifica el parámetro state de OAuth 2.0 para determinar plataforma y acción, luego autentica o registra al usuario.\n     *\n     * **Respuestas de éxito:**\n     * - Web: redirige a /oauth/success con token, customer_id, is_new_customer=1|0, message\n     * - Móvil: redirige a subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **Respuestas de error:**\n     * - Web: redirige a /oauth/success con error=xxx&message=xxx\n     * - Móvil: redirige a subwayapp://oauth/callback?error=xxx&message=xxx\n     *\n     * **Códigos de error posibles:**\n     * - user_already_exists: La cuenta ya existe (en flujo de registro)\n     * - email_not_registered: El email no está registrado (en flujo de login)\n     * - authentication_failed: Error general de autenticación\n     *\n     * **Parámetro is_new_customer:**\n     * - 1: Usuario recién registrado (debe completar perfil)\n     * - 0: Usuario existente (login normal)",
                "operationId": "281ab9caddb2b86e3614c9e34567db4f",
                "parameters": [
                    {
                        "name": "code",
                        "in": "query",
                        "description": "Código de autorización de Google OAuth",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4/0AY0e-g7..."
                        }
                    },
                    {
                        "name": "state",
                        "in": "query",
                        "description": "Parámetro state de OAuth 2.0 con información codificada de plataforma, acción y device_id",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "eyJwbGF0Zm9ybSI6IndlYiIsImFjdGlvbiI6ImxvZ2luIn0="
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Respuesta de redirección según plataforma y resultado.\n     *\n     * **ÉXITO WEB:** /oauth/success?token=xxx&customer_id=xxx&is_new_customer=1|0&message=xxx\n     *\n     * **ERROR WEB:** /oauth/success?error=user_already_exists&message=Ya existe una cuenta...\n     *\n     * **ÉXITO MÓVIL:** subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **ERROR MÓVIL:** subwayapp://oauth/callback?error=user_already_exists&message=Ya existe una cuenta...",
                        "headers": {
                            "Location": {
                                "description": "URL de redirección según plataforma y resultado",
                                "schema": {
                                    "type": "string",
                                    "example": "/oauth/success?token=xxx&customer_id=123&is_new_customer=1"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/apple/redirect": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Redirect to Apple OAuth (Web & Mobile)",
                "description": "Initiates Apple OAuth flow for any platform. Uses OAuth 2.0 state parameter to maintain context.",
                "operationId": "eb85e9832719d0e001c347b4497fbd03",
                "parameters": [
                    {
                        "name": "action",
                        "in": "query",
                        "description": "Action type: 'login' for existing users or 'register' for new users",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "login",
                                "register"
                            ],
                            "example": "login"
                        }
                    },
                    {
                        "name": "platform",
                        "in": "query",
                        "description": "Client platform: 'web' for web applications (returns JSON) or 'mobile' for mobile apps (redirects via deep link)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "web",
                                "mobile"
                            ],
                            "example": "web"
                        }
                    },
                    {
                        "name": "device_id",
                        "in": "query",
                        "description": "Device identifier UUID for tracking. **REQUIRED when platform=mobile**, optional for web.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect to Apple OAuth consent screen"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The action field is required."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/oauth/apple/callback": {
            "get": {
                "tags": [
                    "OAuth"
                ],
                "summary": "Callback de OAuth de Apple (Web y Móvil)",
                "description": "Maneja el callback de OAuth después de la autorización de Apple. Decodifica el parámetro state de OAuth 2.0 para determinar plataforma y acción. NOTA: Apple solo envía nombre/email en la PRIMERA autenticación, los logins posteriores solo retornan el user ID.\n     *\n     * **Respuestas de éxito:**\n     * - Web: redirige a /oauth/success con token, customer_id, is_new_customer=1|0, message\n     * - Móvil: redirige a subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **Respuestas de error:**\n     * - Web: redirige a /oauth/success con error=xxx&message=xxx\n     * - Móvil: redirige a subwayapp://oauth/callback?error=xxx&message=xxx\n     *\n     * **Códigos de error posibles:**\n     * - user_already_exists: La cuenta ya existe (en flujo de registro)\n     * - email_not_registered: El email no está registrado (en flujo de login)\n     * - authentication_failed: Error general de autenticación\n     *\n     * **Parámetro is_new_customer:**\n     * - 1: Usuario recién registrado (debe completar perfil)\n     * - 0: Usuario existente (login normal)",
                "operationId": "f4d2234c8403161c607fa0d3b8a3a07a",
                "parameters": [
                    {
                        "name": "code",
                        "in": "query",
                        "description": "Código de autorización de Apple OAuth",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "state",
                        "in": "query",
                        "description": "Parámetro state de OAuth 2.0 con información codificada de plataforma, acción y device_id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Respuesta de redirección según plataforma y resultado.\n     *\n     * **ÉXITO WEB:** /oauth/success?token=xxx&customer_id=xxx&is_new_customer=1|0&message=xxx\n     *\n     * **ERROR WEB:** /oauth/success?error=user_already_exists&message=Ya existe una cuenta...\n     *\n     * **ÉXITO MÓVIL:** subwayapp://oauth/callback?token=xxx&customer_id=xxx&is_new_customer=1|0\n     *\n     * **ERROR MÓVIL:** subwayapp://oauth/callback?error=user_already_exists&message=Ya existe una cuenta..."
                    }
                }
            }
        },
        "/api/v1/cart": {
            "get": {
                "tags": [
                    "Cart"
                ],
                "summary": "Get current cart",
                "description": "Returns the current cart with items, totals and summary.",
                "operationId": "2949ba84adf7767b0d9724b8cfdb4f92",
                "responses": {
                    "200": {
                        "description": "Cart retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Cart"
                ],
                "summary": "Clear cart",
                "description": "Removes all items from the cart.",
                "operationId": "36732fbdfe6d876aa018aaadc3301df8",
                "responses": {
                    "200": {
                        "description": "Cart cleared successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carrito vaciado"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/items": {
            "post": {
                "tags": [
                    "Cart"
                ],
                "summary": "Add item to cart",
                "description": "Adds a product or combo to the cart with options and quantity.",
                "operationId": "810facb5ae78d4f8e2f356e6f1ef05b1",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "product_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "combo_id": {
                                        "type": "integer",
                                        "example": null
                                    },
                                    "variant_id": {
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "quantity": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "selected_options": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "section_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "option_id": {
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "combo_selections": {
                                        "type": "array",
                                        "items": {
                                            "type": "object"
                                        }
                                    },
                                    "notes": {
                                        "type": "string",
                                        "example": "Sin cebolla"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Item added successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "item": {
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Item agregado al carrito"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/items/{id}": {
            "put": {
                "tags": [
                    "Cart"
                ],
                "summary": "Update cart item",
                "description": "Updates quantity, options, or notes for a cart item.",
                "operationId": "54d1f2c2a3482f39e322571bfffbad16",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Cart item ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "quantity": {
                                        "type": "integer",
                                        "example": 3
                                    },
                                    "selected_options": {
                                        "type": "array",
                                        "items": {
                                            "type": "object"
                                        }
                                    },
                                    "combo_selections": {
                                        "type": "array",
                                        "items": {
                                            "type": "object"
                                        }
                                    },
                                    "notes": {
                                        "type": "string",
                                        "example": "Extra queso"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Item updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "item": {
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Item actualizado"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Cart item not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Cart"
                ],
                "summary": "Remove cart item",
                "description": "Removes an item from the cart.",
                "operationId": "23db43e7bb24d70c755bb1f89b6ca573",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Cart item ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item removed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Item eliminado del carrito"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Cart item not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/restaurant": {
            "put": {
                "tags": [
                    "Cart"
                ],
                "summary": "Update cart restaurant",
                "description": "Changes the restaurant for the cart.",
                "operationId": "f54a3a4dd8add9fc036db6848a5624b0",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "restaurant_id": {
                                        "type": "integer",
                                        "example": 2
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Restaurant updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Restaurante actualizado"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/service-type": {
            "put": {
                "tags": [
                    "Cart"
                ],
                "summary": "Update service type",
                "description": "Changes the service type (pickup/delivery) and zone (capital/interior).",
                "operationId": "01e2a4cbf410f45dc86a4c8ca41b035b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "service_type": {
                                        "type": "string",
                                        "enum": [
                                            "pickup",
                                            "delivery"
                                        ],
                                        "example": "delivery"
                                    },
                                    "zone": {
                                        "type": "string",
                                        "enum": [
                                            "capital",
                                            "interior"
                                        ],
                                        "example": "capital"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Service type updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/validate": {
            "post": {
                "tags": [
                    "Cart"
                ],
                "summary": "Validate cart",
                "description": "Checks if all cart items are available and valid for checkout.",
                "operationId": "9649418b515d7ffcc45f9de97d2d74d6",
                "responses": {
                    "200": {
                        "description": "Cart validation result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "is_valid": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "errors": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cart/delivery-address": {
            "put": {
                "tags": [
                    "Cart"
                ],
                "summary": "Set delivery address",
                "description": "Assigns delivery address and automatically assigns restaurant based on geofence validation. If address is outside delivery zone, returns nearest pickup locations.",
                "operationId": "8d1d078cc49f74e48c23f2cb101e1dc6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "delivery_address_id": {
                                        "description": "ID of customer's saved address",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Delivery address set successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "delivery_address": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "street_address": {
                                                            "type": "string",
                                                            "example": "5ta Avenida 10-50, Zona 14"
                                                        },
                                                        "city": {
                                                            "type": "string",
                                                            "example": "Guatemala"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "assigned_restaurant": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Subway Pradera Concepción"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "zone": {
                                                    "type": "string",
                                                    "enum": [
                                                        "capital",
                                                        "interior"
                                                    ],
                                                    "example": "capital"
                                                },
                                                "prices_updated": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Dirección de entrega asignada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Address outside delivery zone",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La dirección está fuera de la zona de entrega"
                                        },
                                        "error_code": {
                                            "type": "string",
                                            "example": "ADDRESS_OUTSIDE_DELIVERY_ZONE"
                                        },
                                        "data": {
                                            "properties": {
                                                "nearest_pickup_locations": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 2
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Subway Miraflores"
                                                            },
                                                            "address": {
                                                                "type": "string",
                                                                "example": "Calzada Roosevelt 22-43, Zona 11"
                                                            },
                                                            "distance_km": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 2.5
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/addresses": {
            "get": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Listar direcciones",
                "description": "Retorna todas las direcciones de entrega guardadas por el cliente, ordenadas por dirección predeterminada primero.",
                "operationId": "528274f156c11ec8939bb6ea6bcc0c29",
                "responses": {
                    "200": {
                        "description": "Direcciones obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "label": {
                                                        "type": "string",
                                                        "example": "Casa"
                                                    },
                                                    "address_line": {
                                                        "type": "string",
                                                        "example": "10 Calle 5-20 Zona 10"
                                                    },
                                                    "latitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 14.6017
                                                    },
                                                    "longitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": -90.525
                                                    },
                                                    "delivery_notes": {
                                                        "type": "string",
                                                        "example": "Casa color amarillo, portón negro",
                                                        "nullable": true
                                                    },
                                                    "zone": {
                                                        "description": "Zona de precios determinada automáticamente por geofencing",
                                                        "type": "string",
                                                        "enum": [
                                                            "capital",
                                                            "interior"
                                                        ],
                                                        "example": "capital"
                                                    },
                                                    "is_default": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-12-10T15:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Crear dirección",
                "description": "Crea una nueva dirección de entrega para el cliente. Si `is_default` es true, desmarca las demás direcciones como predeterminadas.",
                "operationId": "295a58af9e69f7c239705ca1cc57217f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "label",
                                    "address_line",
                                    "latitude",
                                    "longitude"
                                ],
                                "properties": {
                                    "label": {
                                        "description": "Etiqueta de la dirección",
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Casa"
                                    },
                                    "address_line": {
                                        "description": "Dirección completa",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "10 Calle 5-20 Zona 10"
                                    },
                                    "latitude": {
                                        "description": "Latitud (entre -90 y 90)",
                                        "type": "number",
                                        "format": "float",
                                        "example": 14.6017
                                    },
                                    "longitude": {
                                        "description": "Longitud (entre -180 y 180)",
                                        "type": "number",
                                        "format": "float",
                                        "example": -90.525
                                    },
                                    "delivery_notes": {
                                        "description": "Notas adicionales para el repartidor",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "Casa color amarillo, portón negro",
                                        "nullable": true
                                    },
                                    "is_default": {
                                        "description": "Marcar como dirección predeterminada",
                                        "type": "boolean",
                                        "example": false,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Dirección creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dirección creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "label": {
                                                    "type": "string",
                                                    "example": "Casa"
                                                },
                                                "address_line": {
                                                    "type": "string",
                                                    "example": "10 Calle 5-20 Zona 10"
                                                },
                                                "latitude": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 14.6017
                                                },
                                                "longitude": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": -90.525
                                                },
                                                "zone": {
                                                    "description": "Zona determinada automáticamente",
                                                    "type": "string",
                                                    "enum": [
                                                        "capital",
                                                        "interior"
                                                    ],
                                                    "example": "capital"
                                                },
                                                "is_default": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La etiqueta es requerida"
                                        },
                                        "errors": {
                                            "properties": {
                                                "label": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La etiqueta es requerida"
                                                    }
                                                },
                                                "latitude": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La latitud debe estar entre -90 y 90"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/addresses/{address}": {
            "get": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Ver dirección",
                "description": "Obtiene los detalles de una dirección específica del cliente.",
                "operationId": "cb8fe22f8ba2e052391d60126575d4eb",
                "parameters": [
                    {
                        "name": "address",
                        "in": "path",
                        "description": "ID de la dirección",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dirección obtenida exitosamente"
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso para acceder a esta dirección"
                    },
                    "404": {
                        "description": "Dirección no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Actualizar dirección",
                "description": "Actualiza los datos de una dirección existente.",
                "operationId": "202696e6485a13b6929bfd02c1e004b1",
                "parameters": [
                    {
                        "name": "address",
                        "in": "path",
                        "description": "ID de la dirección",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "label",
                                    "address_line",
                                    "latitude",
                                    "longitude"
                                ],
                                "properties": {
                                    "label": {
                                        "type": "string",
                                        "example": "Oficina"
                                    },
                                    "address_line": {
                                        "type": "string",
                                        "example": "Avenida Reforma 12-00 Zona 9"
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 14.595
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -90.52
                                    },
                                    "delivery_notes": {
                                        "type": "string",
                                        "example": "Edificio azul, piso 5",
                                        "nullable": true
                                    },
                                    "is_default": {
                                        "type": "boolean",
                                        "example": true,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Dirección actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dirección actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "Dirección no encontrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Eliminar dirección",
                "description": "Elimina una dirección del cliente.",
                "operationId": "fbfec5479788951718bb1718ed69e16d",
                "parameters": [
                    {
                        "name": "address",
                        "in": "path",
                        "description": "ID de la dirección",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dirección eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dirección eliminada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "Dirección no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/addresses/{address}/set-default": {
            "post": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Establecer dirección predeterminada",
                "description": "Marca una dirección como predeterminada y desmarca las demás.",
                "operationId": "6a8638a66a630b099b53622e5a727d32",
                "parameters": [
                    {
                        "name": "address",
                        "in": "path",
                        "description": "ID de la dirección",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dirección marcada como predeterminada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dirección marcada como predeterminada"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "Dirección no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/addresses/validate": {
            "post": {
                "tags": [
                    "Addresses"
                ],
                "summary": "Validar ubicación para delivery",
                "description": "Valida si las coordenadas proporcionadas están dentro de una zona de cobertura de delivery utilizando geocercas (geofencing).\n     *\n     * **Validación de Geofencing:**\n     * - Verifica si la ubicación está dentro del polígono de cobertura de algún restaurante\n     * - Asigna automáticamente el restaurante correspondiente\n     * - Determina la zona de precios (capital/interior)\n     * - Si no hay cobertura, sugiere restaurantes cercanos para pickup\n     *\n     * Esta validación es **obligatoria** antes de crear una orden de delivery.",
                "operationId": "eca68f0aabb4fa38c3591e5ab4b952ab",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "latitude",
                                    "longitude"
                                ],
                                "properties": {
                                    "latitude": {
                                        "description": "Latitud a validar",
                                        "type": "number",
                                        "format": "float",
                                        "example": 14.6017
                                    },
                                    "longitude": {
                                        "description": "Longitud a validar",
                                        "type": "number",
                                        "format": "float",
                                        "example": -90.525
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Validación completada - Ver campo `is_valid` para determinar si hay cobertura",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "is_valid": {
                                                    "description": "true = dentro de zona de cobertura, false = fuera de zona",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "delivery_available": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "restaurant": {
                                                    "description": "Solo cuando is_valid=true",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 5
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Subway Pradera Zona 10"
                                                        },
                                                        "address": {
                                                            "type": "string",
                                                            "example": "Centro Comercial Pradera Zona 10"
                                                        },
                                                        "estimated_delivery_time": {
                                                            "description": "Tiempo estimado en minutos",
                                                            "type": "integer",
                                                            "example": 30
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "zone": {
                                                    "description": "Solo cuando is_valid=true",
                                                    "type": "string",
                                                    "enum": [
                                                        "capital",
                                                        "interior"
                                                    ],
                                                    "example": "capital",
                                                    "nullable": true
                                                },
                                                "message": {
                                                    "description": "Solo cuando is_valid=false",
                                                    "type": "string",
                                                    "example": "Esta ubicación está fuera de nuestra zona de cobertura de delivery",
                                                    "nullable": true
                                                },
                                                "nearest_pickup_locations": {
                                                    "description": "Solo cuando is_valid=false",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 3
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Subway Oakland"
                                                            },
                                                            "distance_km": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 2.5
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Coordenadas inválidas"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/nits": {
            "get": {
                "tags": [
                    "NITs"
                ],
                "summary": "Listar NITs para facturación",
                "description": "Retorna todos los NITs registrados por el cliente para facturación, ordenados por NIT predeterminado primero.",
                "operationId": "9ea65d652b481a4085bff1955af80b5f",
                "responses": {
                    "200": {
                        "description": "NITs obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "nit": {
                                                        "description": "Número de NIT",
                                                        "type": "string",
                                                        "example": "123456789"
                                                    },
                                                    "business_name": {
                                                        "type": "string",
                                                        "example": "Empresa XYZ S.A.",
                                                        "nullable": true
                                                    },
                                                    "nit_type": {
                                                        "type": "string",
                                                        "enum": [
                                                            "personal",
                                                            "company",
                                                            "other"
                                                        ],
                                                        "example": "company",
                                                        "nullable": true
                                                    },
                                                    "is_default": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "NITs"
                ],
                "summary": "Crear NIT",
                "description": "Registra un nuevo NIT para facturación. El NIT debe ser único para este cliente.",
                "operationId": "97095ef66e837f91b5d83c97d943a495",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nit"
                                ],
                                "properties": {
                                    "nit": {
                                        "description": "Número de NIT (máx. 20 caracteres)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "123456789"
                                    },
                                    "nit_type": {
                                        "description": "Tipo de NIT",
                                        "type": "string",
                                        "enum": [
                                            "personal",
                                            "company",
                                            "other"
                                        ],
                                        "example": "personal",
                                        "nullable": true
                                    },
                                    "business_name": {
                                        "description": "Nombre comercial o razón social",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Empresa XYZ S.A.",
                                        "nullable": true
                                    },
                                    "is_default": {
                                        "description": "Marcar como NIT predeterminado",
                                        "type": "boolean",
                                        "example": false,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "NIT creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "NIT creado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "nit": {
                                                    "type": "string",
                                                    "example": "123456789"
                                                },
                                                "business_name": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "nit_type": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "is_default": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este NIT ya está registrado en tu cuenta"
                                        },
                                        "errors": {
                                            "properties": {
                                                "nit": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Este NIT ya está registrado en tu cuenta"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/nits/{nit}": {
            "get": {
                "tags": [
                    "NITs"
                ],
                "summary": "Ver NIT",
                "description": "Obtiene los detalles de un NIT específico del cliente.",
                "operationId": "fac358b32baa9bc78d892db99c723139",
                "parameters": [
                    {
                        "name": "nit",
                        "in": "path",
                        "description": "ID del NIT",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "NIT obtenido exitosamente"
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso para acceder a este NIT"
                    },
                    "404": {
                        "description": "NIT no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "NITs"
                ],
                "summary": "Actualizar NIT",
                "description": "Actualiza los datos de un NIT existente.",
                "operationId": "fb0eef90a127d779e25061e9dab0687f",
                "parameters": [
                    {
                        "name": "nit",
                        "in": "path",
                        "description": "ID del NIT",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nit"
                                ],
                                "properties": {
                                    "nit": {
                                        "type": "string",
                                        "example": "987654321"
                                    },
                                    "nit_type": {
                                        "type": "string",
                                        "enum": [
                                            "personal",
                                            "company",
                                            "other"
                                        ],
                                        "nullable": true
                                    },
                                    "business_name": {
                                        "type": "string",
                                        "example": "Mi Empresa S.A.",
                                        "nullable": true
                                    },
                                    "is_default": {
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "NIT actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "NIT actualizado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "NIT no encontrado"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "NITs"
                ],
                "summary": "Eliminar NIT",
                "description": "Elimina un NIT del cliente.",
                "operationId": "528124d0d592c24d93f292103bcee837",
                "parameters": [
                    {
                        "name": "nit",
                        "in": "path",
                        "description": "ID del NIT",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "NIT eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "NIT eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "NIT no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/nits/{nit}/set-default": {
            "post": {
                "tags": [
                    "NITs"
                ],
                "summary": "Establecer NIT predeterminado",
                "description": "Marca un NIT como predeterminado y desmarca los demás.",
                "operationId": "1dbcf714fb68da793fcb11c92e0a3123",
                "parameters": [
                    {
                        "name": "nit",
                        "in": "path",
                        "description": "ID del NIT",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "NIT marcado como predeterminado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "NIT marcado como predeterminado"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No tienes permiso"
                    },
                    "404": {
                        "description": "NIT no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/devices": {
            "get": {
                "tags": [
                    "Devices"
                ],
                "summary": "List customer devices",
                "description": "Returns all active devices for authenticated customer. Current device is flagged with is_current_device=true.",
                "operationId": "afcbc146bf93b130969374c0c29f42f6",
                "responses": {
                    "200": {
                        "description": "Devices retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/CustomerDevice"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/devices/register": {
            "post": {
                "tags": [
                    "Devices"
                ],
                "summary": "Register or update device",
                "description": "Enriches existing device (auto-created during auth) with FCM token and custom device name. The mobile app MUST send a personalized device name (e.g., 'iPhone 14 Pro de Juan', 'Samsung Galaxy S23 de María') to replace the generic 'Device' name created during authentication. This allows users to identify their devices in the device list.",
                "operationId": "0743195c75a8fccfdf9875291bd6d8c0",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "fcm_token",
                                    "device_identifier",
                                    "device_name"
                                ],
                                "properties": {
                                    "fcm_token": {
                                        "description": "Firebase Cloud Messaging token for push notifications",
                                        "type": "string",
                                        "example": "fKw8h4Xj..."
                                    },
                                    "device_identifier": {
                                        "description": "REQUIRED: Unique device UUID (must match identifier from auth)",
                                        "type": "string",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    },
                                    "device_name": {
                                        "description": "REQUIRED: Personalized device name set by the app (e.g., 'iPhone 14 Pro de Juan', 'Samsung Galaxy S23 de María'). This name will be displayed to the user when managing their devices.",
                                        "type": "string",
                                        "example": "iPhone 14 Pro de Juan"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Device registered or updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dispositivo registrado exitosamente."
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/CustomerDevice"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/devices/{device}": {
            "delete": {
                "tags": [
                    "Devices"
                ],
                "summary": "Deactivate device",
                "description": "Marks device as inactive (soft deactivate). Device will no longer receive push notifications.",
                "operationId": "a9545ae592649836835794a3421d3551",
                "parameters": [
                    {
                        "name": "device",
                        "in": "path",
                        "description": "Device ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Device deactivated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Dispositivo desactivado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - device belongs to another customer"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/favorites": {
            "get": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Listar favoritos",
                "description": "Retorna todos los productos, combos y restaurantes marcados como favoritos por el cliente.",
                "operationId": "8d2bd7cabe6dbeca723fdd10fb66150d",
                "responses": {
                    "200": {
                        "description": "Favoritos obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "favorable_type": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Product",
                                                            "Combo"
                                                        ],
                                                        "example": "Product"
                                                    },
                                                    "favorable_id": {
                                                        "type": "integer",
                                                        "example": 42
                                                    },
                                                    "favorable": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 42
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Italian BMT"
                                                            },
                                                            "description": {
                                                                "type": "string",
                                                                "example": "Pepperoni, salami y jamón",
                                                                "nullable": true
                                                            },
                                                            "price": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 45,
                                                                "nullable": true
                                                            },
                                                            "image": {
                                                                "type": "string",
                                                                "example": "/storage/products/italian-bmt.jpg",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-12-10T15:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Agregar a favoritos",
                "description": "Agrega un producto o combo a la lista de favoritos del cliente. Si ya existe, retorna el favorito existente.",
                "operationId": "44c917c83b51af4098a02a3941dfe638",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "favorable_type",
                                    "favorable_id"
                                ],
                                "properties": {
                                    "favorable_type": {
                                        "description": "Tipo de elemento a favorizar",
                                        "type": "string",
                                        "enum": [
                                            "product",
                                            "combo"
                                        ],
                                        "example": "product"
                                    },
                                    "favorable_id": {
                                        "description": "ID del producto o combo",
                                        "type": "integer",
                                        "example": 42
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Agregado a favoritos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Agregado a favoritos exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "favorable_type": {
                                                    "type": "string",
                                                    "example": "Product"
                                                },
                                                "favorable_id": {
                                                    "type": "integer",
                                                    "example": 42
                                                },
                                                "favorable": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 42
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Italian BMT"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Ya existe en favoritos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este item ya está en tus favoritos"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "El producto seleccionado no existe."
                                        },
                                        "errors": {
                                            "properties": {
                                                "favorable_type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El tipo de favorito debe ser producto o combo"
                                                    }
                                                },
                                                "favorable_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El producto seleccionado no existe."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/favorites/{type}/{id}": {
            "delete": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Eliminar de favoritos",
                "description": "Remueve un producto o combo de la lista de favoritos del cliente.",
                "operationId": "2797fee3b9a21ee0fd61a9ea71aa9d79",
                "parameters": [
                    {
                        "name": "type",
                        "in": "path",
                        "description": "Tipo de favorito",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "product",
                                "combo"
                            ],
                            "example": "product"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del producto o combo",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 42
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Removido de favoritos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Removido de favoritos exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "404": {
                        "description": "Favorito no encontrado"
                    },
                    "422": {
                        "description": "Tipo de favorito inválido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/menu/categories": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get list of categories",
                "description": "Returns list of active categories ordered by sort_order.",
                "operationId": "d8c3d40b4cccf56b14e52540a4895bf2",
                "responses": {
                    "200": {
                        "description": "Categories retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "categories": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Category"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/categories/{id}": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get category with products",
                "description": "Returns category with its active products.",
                "operationId": "0c6e432be4b27290907703fa7d702ad2",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Category ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "category": {
                                                    "$ref": "#/components/schemas/Category"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Category not found"
                    }
                }
            }
        },
        "/api/v1/menu/combos": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get list of combos",
                "description": "Returns list of active and available combos.",
                "operationId": "67f841321e32d3d68a7452430b38c543",
                "responses": {
                    "200": {
                        "description": "Combos retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "combos": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Combo"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/combos/{id}": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get combo details",
                "description": "Returns combo with items and options.",
                "operationId": "59994435c4cf0f0f6c5026997fc25fbf",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Combo ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Combo retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "combo": {
                                                    "$ref": "#/components/schemas/Combo"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Combo not found"
                    }
                }
            }
        },
        "/api/v1/menu": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get complete menu",
                "description": "Returns complete menu with categories, products and permanent combos. For promotions/offers, use GET /api/v1/menu/promotions.",
                "operationId": "fa6c34f6134451c1793d68fdbf350ec6",
                "responses": {
                    "200": {
                        "description": "Menu retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "categories": {
                                                    "description": "Product categories with their products",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Category"
                                                    }
                                                },
                                                "combos": {
                                                    "description": "Permanent menu combos (not promotional)",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Combo"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/products": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get list of products",
                "description": "Returns list of products with optional filters.",
                "operationId": "98892894fff07c5f9cf2d90524641e8d",
                "parameters": [
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Filter by category ID",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by product name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "has_variants",
                        "in": "query",
                        "description": "Filter by has_variants (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Products retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "products": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Product"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/products/{id}": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get product details",
                "description": "Returns product with variants, sections and badges.",
                "operationId": "c1a25fea4c89363c661995dfe295acde",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "product": {
                                                    "$ref": "#/components/schemas/Product"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                }
            }
        },
        "/api/v1/menu/promotions": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get all promotions grouped by type",
                "description": "Returns all active promotions separated by type: daily_special (single object), two_for_one, percentage_discounts, and bundle_specials.",
                "operationId": "7d50101a4043d405ea335b1d93bb010b",
                "responses": {
                    "200": {
                        "description": "Promotions retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "daily_special": {
                                                    "oneOf": [
                                                        {
                                                            "$ref": "#/components/schemas/Promotion"
                                                        }
                                                    ],
                                                    "nullable": true,
                                                    "description": "Sub del Día - single object or null"
                                                },
                                                "two_for_one": {
                                                    "description": "2x1 promotions",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Promotion"
                                                    }
                                                },
                                                "percentage_discounts": {
                                                    "description": "Percentage discount promotions",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Promotion"
                                                    }
                                                },
                                                "bundle_specials": {
                                                    "description": "Promotional combos (temporary bundles)",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Promotion"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/promotions/daily": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get daily special (Sub del Día)",
                "description": "Returns active daily special promotion (Sub del Día). Without parameters, returns ALL items for the entire week. Use ?today=1 to filter and get only items valid for today's weekday. Note: Multiple subs can be valid for the same day (e.g., 'Italian B.M.T.' + 'Pechuga de Pollo' on Tuesday). Each item has a 'weekdays' array indicating which days it's available (1=Monday to 7=Sunday, ISO-8601 format).",
                "operationId": "efb6cc4ff9cab714b76379c92b44fffd",
                "parameters": [
                    {
                        "name": "today",
                        "in": "query",
                        "description": "Filter by today's weekday. If set to 1, returns only items where the current weekday is in their 'weekdays' array. Multiple items may be returned if more than one sub is available for today.",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "enum": [
                                0,
                                1
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Daily special retrieved successfully. The 'items' array inside 'promotion' contains all subs valid for the requested period. When using ?today=1, 'today' object is included with current weekday info.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "promotion": {
                                                    "description": "The daily special promotion containing filtered items",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 3
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Sub del Día"
                                                        },
                                                        "type": {
                                                            "type": "string",
                                                            "example": "daily_special"
                                                        },
                                                        "items": {
                                                            "description": "Array of subs valid for the period. Multiple items can appear for the same day.",
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 14
                                                                    },
                                                                    "weekdays": {
                                                                        "description": "Days when this item is available (1=Mon, 7=Sun)",
                                                                        "type": "array",
                                                                        "items": {
                                                                            "type": "integer",
                                                                            "example": 2
                                                                        }
                                                                    },
                                                                    "special_price_capital": {
                                                                        "type": "string",
                                                                        "example": "22.00"
                                                                    },
                                                                    "special_price_interior": {
                                                                        "type": "string",
                                                                        "example": "24.00"
                                                                    },
                                                                    "product": {
                                                                        "properties": {
                                                                            "id": {
                                                                                "type": "integer",
                                                                                "example": 1
                                                                            },
                                                                            "name": {
                                                                                "type": "string",
                                                                                "example": "Italian B.M.T."
                                                                            },
                                                                            "image_url": {
                                                                                "type": "string",
                                                                                "example": "https://example.com/storage/products/italian-bmt.jpg",
                                                                                "nullable": true
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "today": {
                                                    "description": "Only present when ?today=1 is used",
                                                    "properties": {
                                                        "weekday": {
                                                            "description": "Current weekday (1=Monday to 7=Sunday)",
                                                            "type": "integer",
                                                            "example": 2
                                                        },
                                                        "weekday_name": {
                                                            "description": "Weekday name in Spanish",
                                                            "type": "string",
                                                            "example": "Martes"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No daily special promotion configured or active",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No hay Sub del Día disponible."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/menu/promotions/combinados": {
            "get": {
                "tags": [
                    "Menu"
                ],
                "summary": "Get bundle specials",
                "description": "Returns active bundle special promotions valid now (Combinados).",
                "operationId": "42ac73bdbbe01d49ddc80b06e5edf9b8",
                "responses": {
                    "200": {
                        "description": "Bundle specials retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "promotions": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Promotion"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/restaurants": {
            "get": {
                "tags": [
                    "Restaurants"
                ],
                "summary": "Listar restaurantes activos",
                "description": "Retorna lista de restaurantes activos con filtros opcionales para servicios de delivery y pickup.",
                "operationId": "8e9b218c7a6e40f8ae2bd9c38da592af",
                "parameters": [
                    {
                        "name": "delivery_active",
                        "in": "query",
                        "description": "Filtrar por servicio de domicilio activo",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "pickup_active",
                        "in": "query",
                        "description": "Filtrar por servicio de pickup activo",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "restaurants": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Restaurant"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/restaurants/{id}": {
            "get": {
                "tags": [
                    "Restaurants"
                ],
                "summary": "Obtener detalles de restaurante",
                "description": "Retorna información detallada de un restaurante específico con horarios y servicios.",
                "operationId": "5b9c16f58ee093952e9fb31c3640ad8f",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Restaurant ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles de restaurante obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "restaurant": {
                                                    "$ref": "#/components/schemas/Restaurant"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Restaurante no encontrado"
                    }
                }
            }
        },
        "/api/v1/restaurants/nearby": {
            "get": {
                "tags": [
                    "Restaurants"
                ],
                "summary": "Buscar restaurantes cercanos",
                "description": "Retorna restaurantes cercanos a una ubicación específica usando fórmula de Haversine para calcular distancia. Resultados ordenados por distancia.",
                "operationId": "5f2df5f58335fba53626d7e38d8da11f",
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "description": "Latitud de la ubicación del usuario",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "example": 14.6349
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "description": "Longitud de la ubicación del usuario",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "example": -90.5069
                        }
                    },
                    {
                        "name": "radius_km",
                        "in": "query",
                        "description": "Radio de búsqueda en kilómetros (default: 10km, max: 50km)",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "example": 5
                        }
                    },
                    {
                        "name": "delivery_active",
                        "in": "query",
                        "description": "Filtrar por servicio de domicilio activo",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "pickup_active",
                        "in": "query",
                        "description": "Filtrar por servicio de pickup activo",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Restaurantes cercanos obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "restaurants": {
                                                    "type": "array",
                                                    "items": {
                                                        "allOf": [
                                                            {
                                                                "$ref": "#/components/schemas/Restaurant"
                                                            },
                                                            {
                                                                "properties": {
                                                                    "distance_km": {
                                                                        "description": "Distancia en kilómetros desde la ubicación del usuario",
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 2.45
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "search_radius_km": {
                                                    "description": "Radio de búsqueda usado",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 5
                                                },
                                                "total_found": {
                                                    "description": "Total de restaurantes encontrados dentro del radio",
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "El campo lat es requerido."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/restaurants/{id}/reviews": {
            "get": {
                "tags": [
                    "Menu - Restaurants"
                ],
                "summary": "Get restaurant reviews",
                "description": "Returns paginated reviews for a specific restaurant.",
                "operationId": "85641288b1eec3eb378bb51acaa4f060",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Restaurant ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Reviews per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reviews retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "reviews": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "summary": {
                                                    "properties": {
                                                        "average_rating": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 4.5
                                                        },
                                                        "total_reviews": {
                                                            "type": "integer",
                                                            "example": 100
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Restaurant not found"
                    }
                }
            }
        },
        "/api/v1/orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Get order history",
                "description": "Returns paginated list of customer's orders.",
                "operationId": "00d3856d2d3d93124e0cc021d0cb5b79",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page",
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by status",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Orders retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Create order from cart",
                "description": "Creates a new order from the customer's active cart. Important validations: restaurant_id is required for pickup orders, delivery_address_id is required for delivery orders, scheduled_pickup_time must be at least 30 minutes from now for pickup orders, cart must not be empty and all items must be valid.",
                "operationId": "79da0a1adcc617490783dfd61927ff56",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "restaurant_id",
                                    "service_type",
                                    "payment_method"
                                ],
                                "properties": {
                                    "restaurant_id": {
                                        "description": "Restaurant ID (required for pickup)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "service_type": {
                                        "description": "Service type: pickup or delivery",
                                        "type": "string",
                                        "enum": [
                                            "pickup",
                                            "delivery"
                                        ],
                                        "example": "pickup"
                                    },
                                    "delivery_address_id": {
                                        "description": "Customer address ID (required if service_type=delivery)",
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "scheduled_pickup_time": {
                                        "description": "Scheduled pickup time (optional, must be >= 30 min from now for pickup)",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-12-15T15:30:00Z",
                                        "nullable": true
                                    },
                                    "payment_method": {
                                        "description": "Payment method",
                                        "type": "string",
                                        "enum": [
                                            "cash",
                                            "card",
                                            "online"
                                        ],
                                        "example": "cash"
                                    },
                                    "nit_id": {
                                        "description": "Customer NIT ID for invoice (optional)",
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "notes": {
                                        "description": "Order notes (max 500 chars)",
                                        "type": "string",
                                        "example": "Sin cebolla, extra tomate",
                                        "nullable": true
                                    },
                                    "points_to_redeem": {
                                        "description": "Loyalty points to redeem (optional)",
                                        "type": "integer",
                                        "example": 100,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Order created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "description": "Order details",
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "order_number": {
                                                    "type": "string",
                                                    "example": "ORD-20251215-0001"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pending",
                                                        "confirmed",
                                                        "preparing",
                                                        "ready",
                                                        "out_for_delivery",
                                                        "delivered",
                                                        "completed",
                                                        "cancelled"
                                                    ],
                                                    "example": "pending"
                                                },
                                                "service_type": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pickup",
                                                        "delivery"
                                                    ],
                                                    "example": "pickup"
                                                },
                                                "zone": {
                                                    "type": "string",
                                                    "enum": [
                                                        "capital",
                                                        "interior"
                                                    ],
                                                    "example": "capital"
                                                },
                                                "restaurant": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Subway Pradera Concepción"
                                                        },
                                                        "address": {
                                                            "type": "string",
                                                            "example": "Pradera Concepción, Zona 14"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "summary": {
                                                    "properties": {
                                                        "subtotal": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 125
                                                        },
                                                        "discount_total": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 0
                                                        },
                                                        "delivery_fee": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 15
                                                        },
                                                        "tax": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 0
                                                        },
                                                        "total": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 140
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "payment": {
                                                    "properties": {
                                                        "method": {
                                                            "type": "string",
                                                            "example": "cash"
                                                        },
                                                        "status": {
                                                            "type": "string",
                                                            "example": "pending"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Orden creada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La hora de recogida debe ser al menos 30 minutos desde ahora."
                                        },
                                        "errors": {
                                            "properties": {
                                                "scheduled_pickup_time": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La hora de recogida debe ser al menos 30 minutos desde ahora."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/active": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Get active orders",
                "description": "Returns customer's active orders (not completed or cancelled).",
                "operationId": "2f646719ef60c83ef4fee9f78778a6a0",
                "responses": {
                    "200": {
                        "description": "Active orders retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/{order}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Get order details",
                "description": "Returns detailed information about a specific order.",
                "operationId": "38713af501dbd66af5a66bd568a49bc2",
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "description": "Order ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - Order does not belong to customer"
                    },
                    "404": {
                        "description": "Order not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/{order}/track": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Track order",
                "description": "Returns current order status and complete status history with timestamps. Status Flow - Pickup: pending to confirmed to preparing to ready to completed. Delivery: pending to confirmed to preparing to ready to out_for_delivery to delivered to completed.",
                "operationId": "53cf1d869686c7ebd9af1ba74cc997ad",
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "description": "Order ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order tracking retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "order_number": {
                                                    "type": "string",
                                                    "example": "ORD-20251215-0001"
                                                },
                                                "current_status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pending",
                                                        "confirmed",
                                                        "preparing",
                                                        "ready",
                                                        "out_for_delivery",
                                                        "delivered",
                                                        "completed",
                                                        "cancelled"
                                                    ],
                                                    "example": "preparing"
                                                },
                                                "restaurant": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Subway Pradera Concepción"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "service_type": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pickup",
                                                        "delivery"
                                                    ],
                                                    "example": "pickup"
                                                },
                                                "estimated_ready_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-15T15:30:00Z",
                                                    "nullable": true
                                                },
                                                "ready_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-15T15:25:00Z",
                                                    "nullable": true
                                                },
                                                "delivered_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "status_history": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "status": {
                                                                "type": "string",
                                                                "example": "preparing"
                                                            },
                                                            "previous_status": {
                                                                "type": "string",
                                                                "example": "confirmed"
                                                            },
                                                            "changed_by": {
                                                                "type": "string",
                                                                "example": "restaurant"
                                                            },
                                                            "notes": {
                                                                "type": "string",
                                                                "example": null,
                                                                "nullable": true
                                                            },
                                                            "timestamp": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2025-12-15T15:10:00Z"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - Order does not belong to customer"
                    },
                    "404": {
                        "description": "Order not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/{order}/cancel": {
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Cancel order",
                "description": "Cancels an order if allowed by its current status.",
                "operationId": "aee443a742a80c8c038743d02cee6c66",
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "description": "Order ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "example": "Cambié de opinión"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Order cancelled successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Orden cancelada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - Order does not belong to customer"
                    },
                    "422": {
                        "description": "Cannot cancel order in current status"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/{order}/reorder": {
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Reorder",
                "description": "Creates a new cart with the same items from a previous order.",
                "operationId": "82c3a8c301b6978eb6fea07609bcad41",
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "description": "Order ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cart created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Carrito creado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - Order does not belong to customer"
                    },
                    "404": {
                        "description": "Order not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/orders/{order}/review": {
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Create order review",
                "description": "Creates a review for a completed order. Only allowed for completed/delivered orders.",
                "operationId": "187d51728f3ffe8bb363af007d4a60a6",
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "description": "Order ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "overall_rating": {
                                        "type": "integer",
                                        "maximum": 5,
                                        "minimum": 1,
                                        "example": 5
                                    },
                                    "quality_rating": {
                                        "type": "integer",
                                        "maximum": 5,
                                        "minimum": 1,
                                        "example": 4
                                    },
                                    "speed_rating": {
                                        "type": "integer",
                                        "maximum": 5,
                                        "minimum": 1,
                                        "example": 5
                                    },
                                    "service_rating": {
                                        "type": "integer",
                                        "maximum": 5,
                                        "minimum": 1,
                                        "example": 4
                                    },
                                    "comment": {
                                        "type": "string",
                                        "example": "Muy buena comida!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Review created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Gracias por tu calificación"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - Order does not belong to customer"
                    },
                    "422": {
                        "description": "Validation error or order cannot be reviewed"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/me/recent-orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Obtener órdenes recientes completadas",
                "description": "Retorna las últimas 5 órdenes completadas (status completed o delivered) del cliente autenticado, ordenadas por más reciente primero. Incluye indicador de disponibilidad de productos para reordenar.",
                "operationId": "f23a34d5949e750106c735d64bbeb4eb",
                "responses": {
                    "200": {
                        "description": "Órdenes recientes obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 123
                                                    },
                                                    "order_number": {
                                                        "type": "string",
                                                        "example": "ORD-20251215-0001"
                                                    },
                                                    "ordered_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-12-15T15:00:00Z"
                                                    },
                                                    "restaurant": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Subway Pradera"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "total": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 85
                                                    },
                                                    "items_summary": {
                                                        "type": "string",
                                                        "example": "Italian BMT, Coca-Cola"
                                                    },
                                                    "items": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object"
                                                        }
                                                    },
                                                    "can_reorder": {
                                                        "type": "boolean",
                                                        "example": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/points/balance": {
            "get": {
                "tags": [
                    "Points"
                ],
                "summary": "Obtener balance de puntos",
                "description": "Retorna el balance actual de puntos del cliente, su valor en Quetzales, y las tasas de conversión.\n     *\n     * **Sistema de Puntos:**\n     * - Acumulación: 1 punto por cada Q10 gastados\n     * - Redención: 1 punto = Q0.10 de descuento\n     * - Los puntos expiran a los 6 meses de inactividad\n     * - El multiplicador de puntos varía según el tipo de cliente (Regular, Bronce, Plata, Oro, Platino)",
                "operationId": "97acd74ab7c89450a72f19e923f50e28",
                "responses": {
                    "200": {
                        "description": "Balance de puntos obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "points_balance": {
                                                    "description": "Puntos totales disponibles",
                                                    "type": "integer",
                                                    "example": 250
                                                },
                                                "points_updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-10T15:30:00Z"
                                                },
                                                "points_value_in_currency": {
                                                    "description": "Valor en Quetzales (Q)",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 25
                                                },
                                                "conversion_rate": {
                                                    "properties": {
                                                        "points_per_quetzal_spent": {
                                                            "description": "Puntos ganados por cada Q1 gastado",
                                                            "type": "integer",
                                                            "example": 10
                                                        },
                                                        "points_value": {
                                                            "description": "Valor en Q de cada punto",
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 0.1
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/points/history": {
            "get": {
                "tags": [
                    "Points"
                ],
                "summary": "Historial de transacciones de puntos",
                "description": "Retorna el historial paginado de todas las transacciones de puntos del cliente (ganados, redimidos, expirados).",
                "operationId": "2ffd2f36b62c2f0c01c0adda715b0be7",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 123
                                                    },
                                                    "points": {
                                                        "description": "Puntos (positivo = ganados, negativo = redimidos)",
                                                        "type": "integer",
                                                        "example": 50
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "enum": [
                                                            "earned",
                                                            "redeemed",
                                                            "expired",
                                                            "bonus",
                                                            "adjustment"
                                                        ],
                                                        "example": "earned"
                                                    },
                                                    "description": {
                                                        "type": "string",
                                                        "example": "Puntos ganados en orden #ORD-2025-000123"
                                                    },
                                                    "reference_type": {
                                                        "type": "string",
                                                        "example": "App\\\\Models\\\\Order",
                                                        "nullable": true
                                                    },
                                                    "reference_id": {
                                                        "type": "integer",
                                                        "example": 456,
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-12-10T15:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 87
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/products/{product}/view": {
            "post": {
                "tags": [
                    "Product Views"
                ],
                "summary": "Registrar vista de producto",
                "description": "Registra que un cliente vio un producto. Se usa para el historial de productos vistos recientemente.",
                "operationId": "0d18a04a73ed5dc8efdf0ecb548582c7",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Vista registrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vista registrada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "404": {
                        "description": "Producto no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/combos/{combo}/view": {
            "post": {
                "tags": [
                    "Product Views"
                ],
                "summary": "Registrar vista de combo",
                "description": "Registra que un cliente vio un combo. Se usa para el historial de productos vistos recientemente.",
                "operationId": "8f37b98a08a0c7addd122464bf602187",
                "parameters": [
                    {
                        "name": "combo",
                        "in": "path",
                        "description": "Combo ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Vista registrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vista registrada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "404": {
                        "description": "Combo no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/me/recently-viewed": {
            "get": {
                "tags": [
                    "Product Views"
                ],
                "summary": "Obtener productos vistos recientemente",
                "description": "Retorna los últimos 20 productos y combos vistos por el cliente autenticado.",
                "operationId": "bf803c31e82ea6d20a930217dd2bc315",
                "responses": {
                    "200": {
                        "description": "Productos vistos recientemente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "type": {
                                                        "description": "Tipo: product o combo",
                                                        "type": "string",
                                                        "example": "product"
                                                    },
                                                    "data": {
                                                        "description": "Datos del producto o combo",
                                                        "type": "object"
                                                    },
                                                    "viewed_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-12-15T10:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile": {
            "get": {
                "tags": [
                    "Profile"
                ],
                "summary": "Get customer profile",
                "description": "Returns authenticated customer profile with addresses, NITs, and active devices.",
                "operationId": "dffac35700b3186de8d19cc212fe0285",
                "responses": {
                    "200": {
                        "description": "Profile retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "$ref": "#/components/schemas/Customer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Profile"
                ],
                "summary": "Actualizar perfil del cliente",
                "description": "Actualiza la información del perfil del cliente. Si el email cambia, se marca como no verificado.",
                "operationId": "d682da2fd566e34f597e169ac582ad3f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+50212345678",
                                        "nullable": true
                                    },
                                    "birth_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "1990-05-15",
                                        "nullable": true
                                    },
                                    "gender": {
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female",
                                            "other"
                                        ],
                                        "example": "male",
                                        "nullable": true
                                    },
                                    "email_offers_enabled": {
                                        "description": "Recibir ofertas y promociones por email",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Perfil actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Perfil actualizado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "customer": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "first_name": {
                                                            "type": "string",
                                                            "example": "Juan"
                                                        },
                                                        "last_name": {
                                                            "type": "string",
                                                            "example": "Pérez"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "juan@example.com"
                                                        },
                                                        "phone": {
                                                            "type": "string",
                                                            "example": "+50212345678"
                                                        },
                                                        "email_offers_enabled": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "points": {
                                                            "type": "integer",
                                                            "example": 500
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Profile"
                ],
                "summary": "Eliminar cuenta de cliente",
                "description": "Soft delete de la cuenta del cliente. Revoca todos los tokens.\n     *\n     * **Para cuentas locales (email/contraseña):**\n     * - Requiere: password (contraseña actual para confirmar)\n     *\n     * **Para cuentas OAuth (Google/Apple) sin contraseña:**\n     * - NO requiere password (el body puede estar vacío o enviar `{}`)\n     *\n     * **Período de gracia:**\n     * - La cuenta se puede recuperar dentro de 30 días usando POST /api/v1/auth/reactivate\n     * - Después de 30 días, la cuenta se elimina permanentemente",
                "operationId": "dd388e266427403d3d4573c1104c784a",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "password": {
                                        "description": "Contraseña actual. SOLO requerido para cuentas locales (oauth_provider='local'). NO enviar si es cuenta OAuth.",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cuenta eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cuenta eliminada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "can_reactivate_until": {
                                                    "description": "Fecha límite para reactivar la cuenta",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-12-27T10:30:00Z"
                                                },
                                                "days_to_reactivate": {
                                                    "description": "Días restantes para reactivar",
                                                    "type": "integer",
                                                    "example": 30
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Contraseña incorrecta (solo cuentas locales)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La contraseña es incorrecta."
                                        },
                                        "errors": {
                                            "properties": {
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña es incorrecta."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile/avatar": {
            "post": {
                "tags": [
                    "Profile"
                ],
                "summary": "Update customer avatar",
                "description": "Updates customer avatar URL. Can be a URL to uploaded image or OAuth provider avatar.",
                "operationId": "b67e208bcaefaa8d266a90398752d0c6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "avatar"
                                ],
                                "properties": {
                                    "avatar": {
                                        "description": "Avatar URL",
                                        "type": "string",
                                        "example": "https://example.com/avatar.jpg"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Avatar updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Avatar actualizado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "avatar": {
                                                    "type": "string",
                                                    "example": "https://example.com/avatar.jpg"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Profile"
                ],
                "summary": "Delete customer avatar",
                "description": "Removes customer avatar. Sets avatar to null.",
                "operationId": "c62431c4a1d50a4ac550be7c4bf25477",
                "responses": {
                    "200": {
                        "description": "Avatar deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Avatar eliminado exitosamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/profile/password": {
            "put": {
                "tags": [
                    "Profile"
                ],
                "summary": "Actualizar o crear contraseña",
                "description": "Cambia o crea la contraseña del cliente. Revoca todos los tokens excepto el actual por seguridad.\n     *\n     * **Para cuentas locales (email/contraseña):**\n     * - Requiere: current_password, password, password_confirmation\n     * - La nueva contraseña debe ser diferente a la actual\n     *\n     * **Para cuentas OAuth (Google/Apple) sin contraseña:**\n     * - Requiere: password, password_confirmation\n     * - NO requiere current_password (están creando su primera contraseña)\n     * - Después de crear contraseña, pueden usar ambos métodos: OAuth y contraseña\n     *\n     * **Comportamiento después de crear contraseña (OAuth):**\n     * - El usuario mantiene su google_id/apple_id vinculado\n     * - oauth_provider cambia a 'local'\n     * - Puede iniciar sesión con Google/Apple O con email+contraseña",
                "operationId": "141e4afbe7b6c73bcd252f096680adb5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "current_password": {
                                        "description": "Contraseña actual. SOLO requerido para cuentas locales (oauth_provider='local'). NO enviar si es cuenta OAuth.",
                                        "type": "string",
                                        "format": "password",
                                        "example": "OldPass123!"
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (mínimo 6 caracteres, al menos 1 letra y 1 número)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Debe coincidir con password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NuevaPass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña actualizada/creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Contraseña creada exitosamente. Ahora puedes iniciar sesión con tu correo y contraseña."
                                        },
                                        "data": {
                                            "properties": {
                                                "password_created": {
                                                    "description": "true si es primera contraseña (usuario OAuth), false si fue cambio de contraseña existente",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "can_use_password_login": {
                                                    "description": "Siempre true después de esta operación",
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "La contraseña actual es incorrecta."
                                        },
                                        "errors": {
                                            "properties": {
                                                "current_password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña actual es incorrecta."
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Las contraseñas no coinciden."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/rewards": {
            "get": {
                "tags": [
                    "Rewards"
                ],
                "summary": "Get redeemable items catalog",
                "description": "Returns all products, variants, and combos that can be redeemed with loyalty points. Items are grouped by type and sorted by points_cost ascending.",
                "operationId": "e43af63bec0bd63488798eea37684e04",
                "responses": {
                    "200": {
                        "description": "Redeemable items retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "products": {
                                                    "description": "Products WITHOUT variants redeemable with points",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "variants": {
                                                    "description": "Product variants (sizes) redeemable with points",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "combos": {
                                                    "description": "Combos redeemable with points",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "total_count": {
                                                    "description": "Total number of redeemable items",
                                                    "type": "integer",
                                                    "example": 8
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Customer": {
                "title": "Customer",
                "description": "Customer model with profile information and loyalty data",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "first_name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "full_name": {
                        "description": "Computed full name",
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan@example.com"
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z",
                        "nullable": true
                    },
                    "avatar": {
                        "type": "string",
                        "example": "https://example.com/avatar.jpg",
                        "nullable": true
                    },
                    "oauth_provider": {
                        "type": "string",
                        "enum": [
                            "local",
                            "google"
                        ],
                        "example": "local"
                    },
                    "subway_card": {
                        "description": "Unique loyalty card number (10-12 digits)",
                        "type": "string",
                        "example": "802056895224"
                    },
                    "birth_date": {
                        "type": "string",
                        "format": "date",
                        "example": "1990-05-15",
                        "nullable": true
                    },
                    "gender": {
                        "type": "string",
                        "enum": [
                            "male",
                            "female",
                            "other"
                        ],
                        "example": "male",
                        "nullable": true
                    },
                    "phone": {
                        "description": "8-digit phone number (Guatemala)",
                        "type": "string",
                        "example": "12345678",
                        "nullable": true
                    },
                    "last_login_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z",
                        "nullable": true
                    },
                    "last_activity_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T16:00:00Z",
                        "nullable": true
                    },
                    "last_purchase_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-18T12:30:00Z",
                        "nullable": true
                    },
                    "points": {
                        "description": "Available loyalty points",
                        "type": "integer",
                        "example": 150
                    },
                    "points_updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-18T12:30:00Z",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "suspended"
                        ],
                        "example": "active"
                    },
                    "is_online": {
                        "description": "True if customer is currently active",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-10T08:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z"
                    }
                },
                "type": "object"
            },
            "CustomerDevice": {
                "title": "CustomerDevice",
                "description": "Customer device registered for push notifications",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "customer_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "sanctum_token_id": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "fcm_token": {
                        "type": "string",
                        "example": "fKw8h4Xj...",
                        "nullable": true
                    },
                    "device_identifier": {
                        "type": "string",
                        "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "device_name": {
                        "type": "string",
                        "example": "iPhone 14 Pro de Juan",
                        "nullable": true
                    },
                    "last_used_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z",
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "login_count": {
                        "type": "integer",
                        "example": 15
                    },
                    "is_current_device": {
                        "description": "True if this device is associated with current token",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-10T08:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-20T15:45:00Z"
                    }
                },
                "type": "object"
            },
            "PriceZones": {
                "title": "Price Zones",
                "description": "Sistema de precios con 4 zonas: pickup capital, domicilio capital, pickup interior, domicilio interior",
                "properties": {
                    "pickup_capital": {
                        "description": "Precio para pickup en Ciudad de Guatemala",
                        "type": "number",
                        "format": "float",
                        "example": 45
                    },
                    "domicilio_capital": {
                        "description": "Precio para domicilio en Ciudad de Guatemala",
                        "type": "number",
                        "format": "float",
                        "example": 50
                    },
                    "pickup_interior": {
                        "description": "Precio para pickup en el interior",
                        "type": "number",
                        "format": "float",
                        "example": 48
                    },
                    "domicilio_interior": {
                        "description": "Precio para domicilio en el interior",
                        "type": "number",
                        "format": "float",
                        "example": 53
                    }
                },
                "type": "object"
            },
            "Category": {
                "title": "Category",
                "description": "Categoría del menú",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Sandwiches"
                    },
                    "uses_variants": {
                        "description": "Si la categoría usa variantes (ej: tamaños)",
                        "type": "boolean",
                        "example": true
                    },
                    "variant_definitions": {
                        "description": "Definiciones de variantes para esta categoría",
                        "type": "object",
                        "nullable": true
                    },
                    "is_combo_category": {
                        "type": "boolean",
                        "example": false
                    },
                    "sort_order": {
                        "type": "integer",
                        "example": 1
                    },
                    "products": {
                        "description": "Productos de esta categoría (solo cuando se carga la relación)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Product"
                        }
                    }
                },
                "type": "object"
            },
            "Product": {
                "title": "Product",
                "description": "Producto del menú con sistema de precios de 4 zonas",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Italian BMT"
                    },
                    "description": {
                        "type": "string",
                        "example": "Salami Genoa, salami picante y jamón",
                        "nullable": true
                    },
                    "image_url": {
                        "type": "string",
                        "example": "https://admin.subwaycardgt.com/storage/products/italian-bmt.jpg",
                        "nullable": true
                    },
                    "category_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "has_variants": {
                        "description": "Si el producto tiene variantes de tamaño",
                        "type": "boolean",
                        "example": true
                    },
                    "prices": {
                        "$ref": "#/components/schemas/PriceZones"
                    },
                    "is_redeemable": {
                        "description": "Si se puede canjear con puntos",
                        "type": "boolean",
                        "example": false
                    },
                    "points_cost": {
                        "description": "Costo en puntos si is_redeemable=true",
                        "type": "integer",
                        "example": 500,
                        "nullable": true
                    },
                    "variants": {
                        "description": "Variantes del producto (ej: 15cm, 30cm)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ProductVariant"
                        }
                    },
                    "sections": {
                        "description": "Secciones de personalización (vegetales, salsas, etc)",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "badges": {
                        "description": "Badges del producto (ej: Nuevo, Popular)",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "ProductVariant": {
                "title": "Product Variant",
                "description": "Variante de producto con precios por zona",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "sku": {
                        "type": "string",
                        "example": "ITL-15CM"
                    },
                    "name": {
                        "type": "string",
                        "example": "15 cm"
                    },
                    "size": {
                        "type": "string",
                        "example": "15cm",
                        "nullable": true
                    },
                    "prices": {
                        "$ref": "#/components/schemas/PriceZones"
                    },
                    "is_redeemable": {
                        "type": "boolean",
                        "example": false
                    },
                    "points_cost": {
                        "type": "integer",
                        "example": 300,
                        "nullable": true
                    },
                    "is_daily_special": {
                        "description": "Si es Sub del Día",
                        "type": "boolean",
                        "example": false
                    },
                    "daily_special_days": {
                        "description": "Días de la semana (1=Lunes, 7=Domingo)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            3,
                            5
                        ],
                        "nullable": true
                    },
                    "daily_special_prices": {
                        "description": "Precios especiales para Sub del Día",
                        "properties": {
                            "pickup_capital": {
                                "type": "number",
                                "format": "float",
                                "example": 35
                            },
                            "domicilio_capital": {
                                "type": "number",
                                "format": "float",
                                "example": 40
                            },
                            "pickup_interior": {
                                "type": "number",
                                "format": "float",
                                "example": 38
                            },
                            "domicilio_interior": {
                                "type": "number",
                                "format": "float",
                                "example": 43
                            }
                        },
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Combo": {
                "title": "Combo",
                "description": "Combo del menú con precios por zona",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Combo Clásico"
                    },
                    "description": {
                        "type": "string",
                        "example": "Sub de 15cm + papas + bebida",
                        "nullable": true
                    },
                    "image_url": {
                        "type": "string",
                        "example": "https://admin.subwaycardgt.com/storage/combos/combo-clasico.jpg",
                        "nullable": true
                    },
                    "prices": {
                        "$ref": "#/components/schemas/PriceZones"
                    },
                    "is_redeemable": {
                        "type": "boolean",
                        "example": false
                    },
                    "points_cost": {
                        "type": "integer",
                        "example": 1000,
                        "nullable": true
                    },
                    "is_available": {
                        "description": "Si el combo está disponible actualmente",
                        "type": "boolean",
                        "example": true
                    },
                    "category_id": {
                        "type": "integer",
                        "example": 2
                    },
                    "sort_order": {
                        "type": "integer",
                        "example": 1
                    },
                    "items": {
                        "description": "Items del combo",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "badges": {
                        "description": "Badges del combo",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "Promotion": {
                "title": "Promotion",
                "description": "Promoción activa (Sub del Día o Combinado)",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Sub del Día - Lunes"
                    },
                    "description": {
                        "type": "string",
                        "example": "Italian BMT 15cm a precio especial",
                        "nullable": true
                    },
                    "image_url": {
                        "type": "string",
                        "example": null,
                        "nullable": true
                    },
                    "type": {
                        "description": "Tipo: daily_special o bundle",
                        "type": "string",
                        "example": "daily_special"
                    },
                    "prices": {
                        "description": "Precios para promociones tipo bundle",
                        "properties": {
                            "bundle_capital": {
                                "type": "number",
                                "format": "float",
                                "example": 85,
                                "nullable": true
                            },
                            "bundle_interior": {
                                "type": "number",
                                "format": "float",
                                "example": 90,
                                "nullable": true
                            }
                        },
                        "type": "object"
                    },
                    "valid_from": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-01",
                        "nullable": true
                    },
                    "valid_until": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "time_from": {
                        "type": "string",
                        "format": "time",
                        "example": "11:00:00",
                        "nullable": true
                    },
                    "time_until": {
                        "type": "string",
                        "format": "time",
                        "example": "22:00:00",
                        "nullable": true
                    },
                    "weekdays": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            3,
                            5
                        ],
                        "nullable": true
                    },
                    "sort_order": {
                        "type": "integer",
                        "example": 1
                    },
                    "items": {
                        "description": "Items de la promoción (para Sub del Día)",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "bundle_items": {
                        "description": "Items del bundle (para Combinados)",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "Restaurant": {
                "title": "Restaurant",
                "description": "Restaurante con información de ubicación, horarios y servicios",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Subway Pradera Concepción"
                    },
                    "address": {
                        "type": "string",
                        "example": "Centro Comercial Pradera Concepción, Local 123"
                    },
                    "phone": {
                        "type": "string",
                        "example": "22345678",
                        "nullable": true
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "pradera@subway.com.gt",
                        "nullable": true
                    },
                    "latitude": {
                        "type": "number",
                        "format": "float",
                        "example": 14.6349,
                        "nullable": true
                    },
                    "longitude": {
                        "type": "number",
                        "format": "float",
                        "example": -90.5069,
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "delivery_active": {
                        "description": "Si tiene servicio de domicilio activo",
                        "type": "boolean",
                        "example": true
                    },
                    "pickup_active": {
                        "description": "Si tiene servicio de pickup activo",
                        "type": "boolean",
                        "example": true
                    },
                    "schedule": {
                        "description": "Horario semanal del restaurante",
                        "type": "object",
                        "nullable": true
                    },
                    "estimated_delivery_time": {
                        "description": "Tiempo estimado de entrega en minutos",
                        "type": "integer",
                        "example": 30,
                        "nullable": true
                    },
                    "estimated_pickup_time": {
                        "description": "Tiempo estimado de pickup en minutos",
                        "type": "integer",
                        "example": 15,
                        "nullable": true
                    },
                    "minimum_order_amount": {
                        "description": "Monto mínimo de orden",
                        "type": "number",
                        "format": "float",
                        "example": 50,
                        "nullable": true
                    },
                    "has_geofence": {
                        "description": "Si tiene geofence configurado para delivery",
                        "type": "boolean",
                        "example": true
                    },
                    "is_open_now": {
                        "description": "Si está abierto en este momento",
                        "type": "boolean",
                        "example": true
                    },
                    "today_schedule": {
                        "description": "Horario de hoy",
                        "type": "object",
                        "nullable": true
                    },
                    "status_text": {
                        "description": "Texto del estado actual",
                        "type": "string",
                        "example": "Abierto"
                    },
                    "distance_km": {
                        "description": "Distancia en km (solo en búsqueda nearby)",
                        "type": "number",
                        "format": "float",
                        "example": 2.45,
                        "nullable": true
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Laravel Sanctum Bearer Token. Obtain from /api/v1/auth/login, /api/v1/auth/register, or OAuth endpoints.",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Endpoints para registro, inicio de sesión, recuperación de contraseña y verificación de email"
        },
        {
            "name": "OAuth",
            "description": "Endpoints para autenticación con Google OAuth"
        },
        {
            "name": "Profile",
            "description": "Gestión del perfil del cliente"
        },
        {
            "name": "Devices",
            "description": "Gestión de dispositivos y tokens FCM para notificaciones push"
        },
        {
            "name": "Addresses",
            "description": "Gestión de direcciones de entrega del cliente"
        },
        {
            "name": "NITs",
            "description": "Gestión de NITs para facturación"
        },
        {
            "name": "Favorites",
            "description": "Gestión de productos y combos favoritos"
        },
        {
            "name": "Points",
            "description": "Sistema de puntos de lealtad y recompensas"
        },
        {
            "name": "Menu",
            "description": "Endpoints públicos para acceder al menú completo, categorías, productos, combos y promociones"
        },
        {
            "name": "Restaurants",
            "description": "Endpoints públicos para listar restaurantes, buscar cercanos y ver reseñas"
        },
        {
            "name": "Product Views",
            "description": "Endpoints autenticados para registrar vistas de productos y combos"
        },
        {
            "name": "Cart",
            "description": "Gestión del carrito de compras"
        },
        {
            "name": "Orders",
            "description": "Creación y gestión de órdenes"
        },
        {
            "name": "Menu - Restaurants",
            "description": "Menu - Restaurants"
        },
        {
            "name": "Rewards",
            "description": "Rewards"
        }
    ]
}